
--[[


local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local res = ReplicatedStorage:WaitForChild("Respawn")

res:FireServer()


]]

--// Services
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TextChatService = cloneref(game:GetService("TextChatService"))

local player = Players.LocalPlayer

--// GUI
local gui = Instance.new("ScreenGui")
gui.Name = "CustomChatBox"
gui.ResetOnSpawn = false
gui.Parent = game.CoreGui

-- Main frame
local chatFrame = Instance.new("Frame")
chatFrame.Size = UDim2.new(0, 380, 0, 70)
chatFrame.Position = UDim2.new(0.5, -190, 0.85, 0)
chatFrame.BackgroundColor3 = Color3.fromRGB(30,30,30)
chatFrame.BorderSizePixel = 0
chatFrame.Parent = gui
chatFrame.Active = true
Instance.new("UICorner", chatFrame).CornerRadius = UDim.new(0,8)

-- Top bar (drag area)
local topBar = Instance.new("Frame")
topBar.Size = UDim2.new(1, 0, 0, 30)
topBar.BackgroundTransparency = 1
topBar.Parent = chatFrame

-- Close button
local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0, 28, 0, 24)
closeBtn.Position = UDim2.new(1, -32, 0, 3)
closeBtn.BackgroundColor3 = Color3.fromRGB(150,40,40)
closeBtn.Text = "X"
closeBtn.Font = Enum.Font.SourceSansBold
closeBtn.TextSize = 16
closeBtn.TextColor3 = Color3.fromRGB(255,255,255)
closeBtn.Parent = topBar
Instance.new("UICorner", closeBtn)

-- Minimize button
local minimizeBtn = Instance.new("TextButton")
minimizeBtn.Size = UDim2.new(0, 28, 0, 24)
minimizeBtn.Position = UDim2.new(1, -64, 0, 3)
minimizeBtn.BackgroundColor3 = Color3.fromRGB(70,70,70)
minimizeBtn.Text = "-"
minimizeBtn.Font = Enum.Font.SourceSansBold
minimizeBtn.TextSize = 18
minimizeBtn.TextColor3 = Color3.fromRGB(255,255,255)
minimizeBtn.Parent = topBar
Instance.new("UICorner", minimizeBtn)

-- Input box
local inputBox = Instance.new("TextBox")
inputBox.Size = UDim2.new(1, -70, 0, 30)
inputBox.Position = UDim2.new(0, 10, 0, 35)
inputBox.BackgroundTransparency = 1
inputBox.Text = ""
inputBox.PlaceholderText = "Underated Bypasser"--Type your message...
inputBox.Font = Enum.Font.SourceSans
inputBox.TextSize = 20
inputBox.TextColor3 = Color3.fromRGB(255,255,255)
inputBox.ClearTextOnFocus = false
inputBox.Parent = chatFrame

-- Send button
local sendBtn = Instance.new("TextButton")
sendBtn.Size = UDim2.new(0, 50, 0, 30)
sendBtn.Position = UDim2.new(1, -55, 0, 35)
sendBtn.BackgroundColor3 = Color3.fromRGB(50,50,50)
sendBtn.Text = "Send"
sendBtn.Font = Enum.Font.SourceSansBold
sendBtn.TextSize = 18
sendBtn.TextColor3 = Color3.fromRGB(255,255,255)
sendBtn.Parent = chatFrame
Instance.new("UICorner", sendBtn)

-------------------------------------------------
-- Dragging
-------------------------------------------------
local dragging = false
local dragStart, startPos

topBar.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		dragStart = input.Position
		startPos = chatFrame.Position

		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
		local delta = input.Position - dragStart
		chatFrame.Position = UDim2.new(
			startPos.X.Scale, startPos.X.Offset + delta.X,
			startPos.Y.Scale, startPos.Y.Offset + delta.Y
		)
	end
end)

-------------------------------------------------
-- Minimize / Close
-------------------------------------------------
local minimized = false

minimizeBtn.MouseButton1Click:Connect(function()
	minimized = not minimized
	inputBox.Visible = not minimized
	sendBtn.Visible = not minimized

	if minimized then
		chatFrame.Size = UDim2.new(0, 200, 0, 30)
	else
		chatFrame.Size = UDim2.new(0, 380, 0, 70)
	end
end)

closeBtn.MouseButton1Click:Connect(function()
	gui:Destroy()
end)

-------------------------------------------------
-- Character maps
-------------------------------------------------
local charMaps = {
    {
       ["a"] = "–∞",-- –∞ ƒÖ ·∫° –ê
       [" "] = "",--   <-- alt
       ["c"] = "c",-- —Å —Å “´ –° ·∏â –°
       ["b"] = "b",-- –í
       ["e"] = "–µ", -- –µ ƒô ·∫π –µ –ï
       ["d"] = "d", --ƒè ·∏ç
       ["g"] = "g",-- ƒ£ «• Í¨∂ ·Äå
       ["f"] = "f",-- ≈ø ∆≠ ·∫ú Í¨µ
       ["i"] = "—ñ",-- ‡πÄ‡πà —ñ ·ªâ ·ªã –Ü
       ["h"] = "“ª", -- ”è‡∏≤ ƒº‡∏≤ “ª —õ ‘ß –ù
       ["k"] = "k",--…Æ “ü ∆ô ƒ∑ Œ∫◊Ö  –ö
       ["j"] = "—ò",-- –à —ò
       ["m"] = "m", -- ·πÉ ƒ±‡∏≤‡∏≤ –ú
       ["l"] = "”è", -- ”è
       ["o"] = "–æ", --»Ø,∆° ÍüÅ ”© ·ªç –æ –û
       ["n"] = "n", -- ƒ±‡∏≤ ·πõƒ± ·πá
       ["q"] = "q",
       ["p"] = "—Ä", -- —Ä –† –†
       ["s"] = "s", --∆æ ·π• ≈ü —ï <- idk —ï <- best —ï –Ö
       ["r"] = "r", -- r ”ª ·πõ
       ["u"] = "u", --Œº ∆∞ —ü Œπ…π Œπ…π◊Ö  …©…π◊Ö <-- best Œπ◊Ö…π◊Ö <-- alt ƒ±◊Ö…π◊Ö <-- idk ‡πÄ…π <-- op
       ["t"] = "t",-- ∆´ ≈£ ·π≠ –¢
       ["w"] = "‘ù",-- w
       ["v"] = "—µ",
       ["y"] = "—É", -- “± ·∫è ·ªµ —É 
       ["x"] = "—Ö", -- ”Ω “≥ –•
       ["z"] = "z",
       --["/"] = "‚ÅÑ", …É◊Ö
       --["1"] = "Ôºë",
       --["2"] = "Ôºí",
       --["3"] = "Ôºì",
       --["4"] = "Ôºî",
       --["5"] = "Ôºï",
       --["6"] = "Ôºñ",
       --["7"] = "Ôºó",
       --["8"] = "Ôºò",
       --["9"] = "Ôºô",
       --["0"] = "Ôºê",


   }
}

--------------------------------------------------------------
-- WORD EXCEPTIONS
--------------------------------------------------------------
local wordExceptions = {
	--["is"] = "i—ï",
	--["this"] = "thi—ï",
 	["an"] = "–∞n",
    ["ass"] = "ƒÖ—ï—ï",-- ƒÖ—ï·π•
	["deadass"] = "deaÍú°dƒÖ—ï—ï",
	["fuckass"] = "f‡πÄ…πckƒÖ—ï—ï",
	["nazi"] = "ƒ±‡∏≤azi",
    ["nazism"] = "ƒ±‡∏≤–∞z—ñ—ïm", -- rƒ±–∞≈º—ñ—ïm
    ["cock"] = "coÍú†ck",-- c—≥ck —îock
	["cocks"] = "coÍú†cks",-- c—≥ck —îock
    ["cum"] = "c‡πÄ…πm",
	["cums"] = "c‡πÄ…πms",
	["cumming"] = "c‡πÄ…πmming",
    ["pornhub"] = "—Ä–ærƒ±‡∏≤hub",
	["porn"] = "porƒ±‡∏≤",
    ["dick"] = "d—ñÍú°ck",
    ["dickhead"] = "d—ñÍú°ckhead",
    ["nigger"] = "ƒ±‡∏≤igger",-- «åÍú°Íú°gÍú°ger rƒ±·ªãgger
    ["nigga"] = "ƒ±‡∏≤igg–∞", -- «åÍú°Íú°gÍú°g–∞ rƒ±·ªãgg–∞
    ["niggers"] = "ƒ±‡∏≤iggers",-- «åÍú°Íú°gÍú°gers rƒ±·ªãggers
    ["niggas"] = "ƒ±‡∏≤igg–∞s",-- «åÍú°Íú°gÍú°g–∞s rƒ±·ªãggas
	["rape"] = "raÍú°pe", -- c„Ä™»∑
    ["raped"] = "raÍú°ped",-- c„Ä™j„Ä™
    ["watchpeopledie.tv"] = "w–∞t—Åh—Ä–µ–æ—Ä”è–µd—ñ–µ.tv",
    ["bitch"] = "bitc”è‡∏≤",-- b—ñt—Å”è‡∏≤ bÍú°—ñt—Åh
    ["bitches"] = "bitc”è‡∏≤–µ—ï",-- b—ñt—Å”è‡∏≤–µ—ï bÍú°—ñt—Åh–µ—ï
    ["bitchy"] = "bitc”è‡∏≤—É",-- b—ñt—Å”è‡∏≤—É bÍú°—ñt—Åh—É
    ["bitchass"] = "bitc”è‡∏≤a—ï—ï",-- b—ñt—Å”è‡∏≤–∞—ï—ï bÍú°—ñt—Åh–∞—ï—ï
    ["asshole"] = "–∞—ï—ï“ª–æ”è–µ",
	["assholes"] = "–∞—ï—ï“ª–æ”è–µ—ï",
    ["molested"] = "m–æ”è–µ—ït–µd",
    ["fag"] = "fag",-- Í¨µƒÖg
    ["fags"] = "fag—ï",-- Í¨µƒÖg—ï
	["faggot"] = "f–∞gÍú°got",-- …ô a Í¨µ–∞gÍú°got
	["faggots"] = "f–∞gÍú°gots",-- Í¨µ–∞gÍú°gots
	--["fat"] = "fƒÖt",
    ["fatass"] = "f–∞tƒÖ—ï—ï",
    ["shit"] = "s”è‡∏≤it",--s”è‡∏≤it
	["shitty"] = "s”è‡∏≤itty",--s”è‡∏≤itt—É
	["shittiest"] = "s”è‡∏≤ittiest",--s”è‡∏≤ittiest
    ["shits"] = "s”è‡∏≤its",--s”è‡∏≤it—ï
	["shitted"] = "s”è‡∏≤itted",--s”è‡∏≤itted
	["dumb"] = "duƒ±‡∏≤‡∏≤b",
    ["dumbass"] = "duƒ±‡∏≤‡∏≤ba—ïs",
    ["dildo"] = "d—ñ”èÍú°do",
    ["boobs"] = "boÍú†obs",-- ”è‡∏ß–æ–æ”è‡∏ß—ï
    ["retard"] = "retaÍú°rd",
    ["retards"] = "retaÍú°rds",
    ["retarded"] = "retaÍú°rded",
	["tits"] = "tits",
	["titties"] = "titties",
	["pedo"] = "p–µdo",
	["pedophile"] = "p–µdop”è‡∏≤ile",
	["pedophiles"] = "p–µdop”è‡∏≤ile—ï",
	["whore"] = "w”è‡∏≤ore",--w”è‡∏≤ore
	["whores"] = "w”è‡∏≤ores",--w”è‡∏≤ores
	["penis"] = "peƒ±‡∏≤is",--peƒ±‡∏≤is
	["cocaine"] = "coc–∞iƒ±‡∏≤e",
	["pussy"] = "p‡πÄ…πss—É",
	["pussies"] = "p‡πÄ…πssies",
	["hate"] = "“ª–∞te",
	["pencil"] = "pencil",
	["hoe"] = "”è‡∏≤–æ–µ",
	["horny"] = "”è‡∏≤orny",
	["kill"] = "kill",
	["fuck"] = "f‡πÄ…πck",--f‡πÄ…πck
	["fucker"] = "f‡πÄ…πcker",--f‡πÄ…πcker
	["fucked"] = "f‡πÄ…πcked",--f‡πÄ…πcked
	["fucking"] = "f‡πÄ…πckiƒ±‡∏≤g",--f‡πÄ…πckiƒ±‡∏≤g
	["fuckin"] = "f‡πÄ…πckiƒ±‡∏≤",--f‡πÄ…πckiƒ±‡∏≤
	["discord"] = "ƒèiscoÍú†rƒè",
	["sex"] = "—ïeÍú†x",
	["sexy"] = "—ïeÍú†xy",
	["moron"] = "moroƒ±‡∏≤",
	["messenger"] = "messeƒ±‡∏≤ger",
	["youtube"] = "youtube",
	--["suck"] = "s∆∞ck",
	--["sucks"] = "s∆∞cks",
	["motherfucker"] = "motherf‡πÄ…πcker",
	["motherfuckers"] = "motherf‡πÄ…πckers",
	["cunt"] = "c‡πÄ…πnt",
	["cunts"] = "c‡πÄ…πnts",
	["what"] = "w”è‡∏≤at",
	["steam"] = "s≈•eam",
	["instagram"] = "iƒ±‡∏≤stagra·πÉ",
	["goon"] = "gooƒ±‡∏≤",
	["gooning"] = "gooƒ±‡∏≤ing",
	["suicide"] = "suiÍú°cide",
	["suicides"] = "suiÍú°cides",
	["suicidal"] = "suiÍú°cidal",
	--["little"] = "li≈•≈•le",
	----------------------------- faces
	[":D"] = ":D",
    --["."] = "À∞",
    -- add more custom words here
}

-------------------------------------------------
-- Helpers
-------------------------------------------------
local function findPlayer(partial)
	partial = partial:lower()
	local matches = {}

	for _, p in pairs(Players:GetPlayers()) do
		if p.Name:lower():sub(1, #partial) == partial then
			table.insert(matches, p)
		end
	end

	if #matches == 1 then return matches[1] end
	if #matches > 1 then return "multiple" end
	return nil
end

local function convertText(text)
	text = text:lower()

	for word, repl in pairs(wordExceptions) do
		text = text:gsub("(%f[%w])"..word.."(%f[%W])", "%1"..repl.."%2")
	end

	--text = text:gsub("%.", "Àé")-- ƒ±◊ÖŸ¥…π◊Ö

	for _, map in pairs(charMaps) do
		for char, repl in pairs(map) do
			text = text:gsub(char, repl)
		end
	end

	return  "¬∫„àø|"..text.."|„àø¬∫"
	--"{„ç∞""„ç∞}" üïÜ·≤ù ·≤ùüïÜ
	-- "{„ç∞„çπ„çπ"..text.."„çπ„çπ„ç∞}" -- alt
	-- "{„çπ„ç∞„çπ"..text.."„çπ„ç∞„çπ}" -- best 2
	-- "{„çπ„ç∞·≤ù"..text.."·≤ù„çπ„ç∞}"
	-- „ç° „çõ „ç™ „àø „àæ
	-- „àø|r–µ—Ä–ærtm–µ—ñf—É–æut“ª—ñnk—ñ'm–∞n–∞—ï—ï“ª–æ”è–µ|„àø
	-- „àø|·πõ–µ—Ä–æ·πõ≈£·πÉ–µ—ñÍ¨µ—É–æ∆∞≈£“ª—ñ·πáƒ∑—ñ'·πÉ–∞·πá–∞—ï—ï“ª–æ”è–µ|
end

local function sendChat(message)
	local channel

	local config = TextChatService:FindFirstChild("ChatInputBarConfiguration")
	if config then
		channel = config.TargetTextChannel
	end

	if TextChatService:FindFirstChild("TextChannels") then
		channel = channel or TextChatService.TextChannels:FindFirstChild("RBXGeneral")
	end

	if channel then
		channel:SendAsync(message)
	end
end

-------------------------------------------------
-- Process (supports /pm)
-- Example: /pm eli hello
-------------------------------------------------
local function process()
	local raw = inputBox.Text
	if raw == "" then return end

	if raw:sub(1,3):lower() == "/pm" then
		local args = raw:split(" ")
		local targetName = args[2]
		table.remove(args,1)
		table.remove(args,1)

		if not targetName then
			inputBox.Text = "No player name!"
			return
		end

		local target = findPlayer(targetName)

		if target == "multiple" then
			inputBox.Text = "there's multiple users!"
			return
		elseif not target then
			inputBox.Text = "user not found!"
			return
		end

		local msg = table.concat(args," ")
		sendChat("/w "..target.Name.." "..convertText(msg))
	else
		sendChat(convertText(raw))
	end

	inputBox.Text = ""
end

sendBtn.MouseButton1Click:Connect(process)
inputBox.FocusLost:Connect(function(enter)
	if enter then process() end
end)
